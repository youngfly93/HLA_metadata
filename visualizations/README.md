# HLA元数据可视化图表说明

生成时间：2025-11-10

本目录包含7个高质量的数据可视化图表，全面展示了HLA元数据收集项目的统计分析结果。

---

## 📊 图表列表

### 1. HLA类型分布图 (`1_hla_distribution.png`)

**类型**：饼图 + 柱状图组合

**内容**：
- 左侧饼图：显示HLA I、HLA II、HLA I/II、Non-HLA等类型的百分比分布
- 右侧柱状图：显示各HLA类型的具体数量

**关键发现**：
- HLA I类数据集占比最高（50.3%）
- HLA I/II类数据集占32.7%
- 97.3%的数据集HLA分类明确

**用途**：快速了解数据集的HLA类型构成

---

### 2. 疾病类别分布图 (`2_disease_distribution.png`)

**类型**：彩色柱状图

**内容**：
- 显示各疾病类别（Cancer、Healthy、Neurodegenerative等）的数据集数量
- 颜色渐变表示不同类别
- 每个柱子上标注数量和百分比

**关键发现**：
- Cancer类数据集最多（42个，28.6%）
- Healthy对照数据集37个（25.2%）
- Unknown疾病类型24个（16.3%）

**用途**：了解数据集的疾病分布情况，便于特定疾病研究的数据集筛选

---

### 3. 样本类型分布图 (`3_sample_distribution.png`)

**类型**：水平柱状图（Top 15）

**内容**：
- 显示前15种样本类型及其数量
- 颜色编码：蓝色=细胞系，红色=血液，绿色=组织，橙色=未知
- 包含详细的样本子类型（如Cell line (hela)、Blood (PBMC)等）

**关键发现**：
- Cell line数据集最多（53个）
- Unknown样本类型31个（21.1%）
- Blood和Tissue数据集均有多种子类型

**用途**：根据样本来源筛选数据集，支持不同实验设计

---

### 4. 数据完整性热力图 (`4_completeness_heatmap.png`)

**类型**：热力图

**内容**：
- 显示13个关键字段的完整性百分比
- 颜色：绿色=高完整性，黄色=中等，红色=低完整性
- 每个单元格显示具体的完整性百分比

**关键发现**：
- 核心字段（title, organisms, instruments）完整性100%
- 生物学字段（diseases, tissues）完整性40-50%
- 引用信息（pubmed_ids, dois）完整性60-70%

**用途**：评估数据质量，识别需要人工补充的字段

---

### 5. 时间序列趋势图 (`5_timeline.png`)

**类型**：折线图（双图）

**内容**：
- 上图：按年份统计的数据集发布趋势
- 下图：按HLA类型分组的年度发布趋势

**关键发现**：
- 数据集发布量在2016-2020年间快速增长
- HLA I类数据集发布量持续占主导
- 近年来HLA I/II类数据集逐渐增多

**用途**：了解HLA免疫肽组学领域的发展趋势

---

### 6. 数据库对比图 (`6_repository_comparison.png`)

**类型**：多图组合（4个子图）

**内容**：
1. 左上：各数据库的数据集分布（饼图）
2. 右上：各数据库的HLA类型分布（堆叠柱状图）
3. 左下：各数据库的数据质量分布
4. 右下：需要人工审核的数据集比例

**关键发现**：
- PRIDE是主要数据源（87.8%）
- 各数据库的HLA类型分布有差异
- jPOST和PeptideAtlas需要更多人工处理

**用途**：对比不同数据库的特点，选择合适的数据源

---

### 7. 综合仪表盘 (`7_comprehensive_dashboard.png`)

**类型**：多维度综合面板

**内容**：
- 左上：核心指标卡片（总数据集数、HLA分类准确率、完整性等）
- 中上：HLA类型柱状图
- 左中：疾病类别饼图
- 中中：主要样本类型柱状图
- 右中：数据库分布饼图
- 底部：时间序列趋势图

**关键发现**：
- 一览式展示所有核心指标
- 147个数据集的多维度统计
- HLA分类97.3%，疾病完整性83.7%，样本完整性78.9%

**用途**：项目总体情况的快速概览，适合演示和报告

---

## 🎨 图表特点

### 视觉设计
- **高分辨率**：300 DPI，适合学术发表
- **配色方案**：专业的色彩搭配，区分度高
- **字体清晰**：粗体标题，适当字号，易于阅读
- **数据标签**：所有图表都有详细的数值标注

### 数据质量
- **准确性**：基于最新的分类和清理后的数据
- **完整性**：覆盖HLA类型、疾病、样本、时间等多维度
- **可追溯性**：所有数据均可回溯到原始CSV文件

### 实用性
- **多角度分析**：从分类、质量、时间、来源等多角度展示
- **层次清晰**：从总体到细节，逐层深入
- **决策支持**：帮助研究人员快速定位合适的数据集

---

## 📁 文件大小

所有图表均为PNG格式，单个文件大小约500KB-2MB，高清且文件大小适中。

---

## 🔄 更新图表

如果数据更新，可以重新运行生成脚本：

```bash
python3 scripts/generate_visualizations.py
```

脚本会自动：
1. 读取最新的数据文件
2. 生成所有7个图表
3. 覆盖原有图表文件

---

## 📊 使用建议

### 学术论文
- 使用图1（HLA分布）展示数据集构成
- 使用图4（完整性热力图）说明数据质量
- 使用图5（时间序列）说明领域发展趋势

### 项目汇报
- 使用图7（综合仪表盘）作为首页总览
- 使用图2和图3展示数据集多样性
- 使用图6说明数据来源的全面性

### 数据筛选
- 根据图1选择HLA类型
- 根据图2选择疾病类别
- 根据图3选择样本类型
- 根据图6选择数据库来源

---

## 🎓 技术细节

### 生成工具
- Python 3.x
- matplotlib 3.x
- seaborn 0.12+
- pandas 1.x

### 数据源
- 主数据文件：`data/processed/all_metadata_classified.csv`
- 备用文件：`data/processed/all_metadata_cleaned.csv`

### 自定义
修改 `scripts/generate_visualizations.py` 中的：
- `COLORS` 字典：调整配色方案
- 各函数参数：调整图表尺寸、字体等
- 筛选条件：只显示特定类型的数据

---

## ✅ 质量保证

所有图表经过以下验证：
- ✅ 数据准确性：与CSV文件一致
- ✅ 视觉效果：专业配色，清晰易读
- ✅ 分辨率：300 DPI，适合打印和发表
- ✅ 完整性：覆盖所有关键维度

---

**生成脚本**：`scripts/generate_visualizations.py`
**数据版本**：2025-11-10
**图表版本**：v1.0
